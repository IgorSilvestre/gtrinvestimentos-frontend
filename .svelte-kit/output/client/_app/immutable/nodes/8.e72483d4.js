import{S as Q,i as W,s as X,e as K,b as I,D as C,h as m,k as g,q as B,l as b,m as y,r as M,n as $,C as _,K as Y,a as V,y as x,c as j,z as D,A as N,d as v,f as Z,g as P,B as S,F as ne,o as oe,v as ee,a2 as ae}from"../chunks/index.78e4d4d0.js";import{g as se}from"../chunks/navigation.55c11801.js";import{A as le}from"../chunks/apiFetch.0eddb5fd.js";import{A as ie}from"../chunks/config.c4e28fd4.js";import{P as ce}from"../chunks/PersonCard.58d8ce11.js";import{L as fe}from"../chunks/Loader.b35f0416.js";import{I as te,P as ue}from"../chunks/Pagination.a9f16dd6.js";import{S as pe,t as me}from"../chunks/Search.995c6764.js";async function he(s){try{await navigator.clipboard.writeText(s)}catch(t){console.error("Error copying to clipboard:",t)}}function de(s){let t,n,o,r;return{c(){t=g("button"),n=B("Copiar emails"),this.h()},l(e){t=b(e,"BUTTON",{class:!0});var l=y(t);n=M(l,"Copiar emails"),l.forEach(m),this.h()},h(){$(t,"class","bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded")},m(e,l){I(e,t,l),_(t,n),o||(r=Y(t,"click",s[2]),o=!0)},p:C,d(e){e&&m(t),o=!1,r()}}}function _e(s){let t,n;return{c(){t=g("div"),n=B("Copiado!"),this.h()},l(o){t=b(o,"DIV",{class:!0});var r=y(t);n=M(r,"Copiado!"),r.forEach(m),this.h()},h(){$(t,"class","bg-green-500 hover:bg-green-700 text-white py-1 px-2 rounded")},m(o,r){I(o,t,r),_(t,n)},p:C,d(o){o&&m(t)}}}function ge(s){let t;function n(e,l){return e[1]?_e:de}let o=n(s),r=o(s);return{c(){r.c(),t=K()},l(e){r.l(e),t=K()},m(e,l){r.m(e,l),I(e,t,l)},p(e,[l]){o===(o=n(e))&&r?r.p(e,l):(r.d(1),r=o(e),r&&(r.c(),r.m(t.parentNode,t)))},i:C,o:C,d(e){r.d(e),e&&m(t)}}}function be(s,t,n){let{content:o}=t,r=!1;const e=()=>{he(o),n(1,r=!0)};return s.$$set=l=>{"content"in l&&n(0,o=l.content)},s.$$.update=()=>{s.$$.dirty&1&&n(1,r=!1)},[o,r,e]}class ye extends Q{constructor(t){super(),W(this,t,be,ge,X,{content:0})}}function O(s){return Array.isArray(s)?s:[s]}let re;te.subscribe(s=>{re=s});function z(s){return s?Math.ceil(s.length/re):0}function H(s,t,n){const o=s.slice();return o[10]=t[n],o}function $e(s){let t,n,o,r=s[2],e=[];for(let a=0;a<r.length;a+=1)e[a]=J(H(s,r,a));const l=a=>v(e[a],1,1,()=>{e[a]=null});return n=new ue({props:{currentPage:s[1],totalPages:s[3],onPageChange:s[7]}}),{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=V(),x(n.$$.fragment)},l(a){for(let i=0;i<e.length;i+=1)e[i].l(a);t=j(a),D(n.$$.fragment,a)},m(a,i){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(a,i);I(a,t,i),N(n,a,i),o=!0},p(a,i){if(i&4){r=a[2];let f;for(f=0;f<r.length;f+=1){const k=H(a,r,f);e[f]?(e[f].p(k,i),P(e[f],1)):(e[f]=J(k),e[f].c(),P(e[f],1),e[f].m(t.parentNode,t))}for(ee(),f=r.length;f<e.length;f+=1)l(f);Z()}const p={};i&2&&(p.currentPage=a[1]),i&8&&(p.totalPages=a[3]),i&2&&(p.onPageChange=a[7]),n.$set(p)},i(a){if(!o){for(let i=0;i<r.length;i+=1)P(e[i]);P(n.$$.fragment,a),o=!0}},o(a){e=e.filter(Boolean);for(let i=0;i<e.length;i+=1)v(e[i]);v(n.$$.fragment,a),o=!1},d(a){ae(e,a),a&&m(t),S(n,a)}}}function Pe(s){let t,n,o;return n=new fe({}),{c(){t=g("div"),x(n.$$.fragment),this.h()},l(r){t=b(r,"DIV",{class:!0});var e=y(t);D(n.$$.fragment,e),e.forEach(m),this.h()},h(){$(t,"class","flex justify-center mx-4 my-6")},m(r,e){I(r,t,e),N(n,t,null),o=!0},p:C,i(r){o||(P(n.$$.fragment,r),o=!0)},o(r){v(n.$$.fragment,r),o=!1},d(r){r&&m(t),S(n)}}}function ve(s){let t,n,o;return{c(){t=g("div"),n=g("p"),o=B("Nenhuma pessoa encontrada"),this.h()},l(r){t=b(r,"DIV",{class:!0});var e=y(t);n=b(e,"P",{});var l=y(n);o=M(l,"Nenhuma pessoa encontrada"),l.forEach(m),e.forEach(m),this.h()},h(){$(t,"class","flex justify-center mx-4 my-2")},m(r,e){I(r,t,e),_(t,n),_(n,o)},p:C,i:C,o:C,d(r){r&&m(t)}}}function J(s){let t,n,o,r;return n=new ce({props:{person:s[10]}}),{c(){t=g("a"),x(n.$$.fragment),this.h()},l(e){t=b(e,"A",{href:!0});var l=y(t);D(n.$$.fragment,l),l.forEach(m),this.h()},h(){var e;$(t,"href",o="person/"+((e=s[10])==null?void 0:e._id))},m(e,l){I(e,t,l),N(n,t,null),r=!0},p(e,l){var i;const a={};l&4&&(a.person=e[10]),n.$set(a),(!r||l&4&&o!==(o="person/"+((i=e[10])==null?void 0:i._id)))&&$(t,"href",o)},i(e){r||(P(n.$$.fragment,e),r=!0)},o(e){v(n.$$.fragment,e),r=!1},d(e){e&&m(t),S(n)}}}function ke(s){let t,n,o,r,e,l,a,i,p,f,k,d,c,A,L,R;a=new pe({props:{domainToFilter:me.domains.person}}),a.$on("search",s[5]),f=new ye({props:{content:s[4]}});const U=[ve,Pe,$e],E=[];function q(u,h){return u[0]&&u[0].length===0?0:u[0]?2:1}return d=q(s),c=E[d]=U[d](s),{c(){t=g("main"),n=g("div"),o=g("button"),r=B("Criar Pessoa"),e=V(),l=g("div"),x(a.$$.fragment),i=V(),p=g("div"),x(f.$$.fragment),k=V(),c.c(),this.h()},l(u){t=b(u,"MAIN",{});var h=y(t);n=b(h,"DIV",{class:!0});var T=y(n);o=b(T,"BUTTON",{type:!0,class:!0});var w=y(o);r=M(w,"Criar Pessoa"),w.forEach(m),T.forEach(m),e=j(h),l=b(h,"DIV",{class:!0});var F=y(l);D(a.$$.fragment,F),F.forEach(m),i=j(h),p=b(h,"DIV",{class:!0});var G=y(p);D(f.$$.fragment,G),G.forEach(m),k=j(h),c.l(h),h.forEach(m),this.h()},h(){$(o,"type","button"),$(o,"class","p-2 text-black bg-green-400 rounded-2xl"),$(n,"class","flex justify-end mx-4 my-2"),$(l,"class","p-4"),$(p,"class","flex justify-center mx-4 my-2")},m(u,h){I(u,t,h),_(t,n),_(n,o),_(o,r),_(t,e),_(t,l),N(a,l,null),_(t,i),_(t,p),N(f,p,null),_(t,k),E[d].m(t,null),A=!0,L||(R=Y(o,"click",s[6]),L=!0)},p(u,[h]){const T={};h&16&&(T.content=u[4]),f.$set(T);let w=d;d=q(u),d===w?E[d].p(u,h):(ee(),v(E[w],1,1,()=>{E[w]=null}),Z(),c=E[d],c?c.p(u,h):(c=E[d]=U[d](u),c.c()),P(c,1),c.m(t,null))},i(u){A||(P(a.$$.fragment,u),P(f.$$.fragment,u),P(c),A=!0)},o(u){v(a.$$.fragment,u),v(f.$$.fragment,u),v(c),A=!1},d(u){u&&m(t),S(a),S(f),E[d].d(),L=!1,R()}}}function Ee(s,t,n){let o;ne(s,te,c=>n(8,o=c));let r;oe(async()=>{const c=await fetch(ie+le.person.getAll);n(0,r=O(await c.json()))});let e=1,l=p(),a=z(r||[]),i="";function p(){const c=(e-1)*o,A=c+o;return(r==null?void 0:r.slice(c,A))??[]}function f(c){n(0,r=[]),n(0,r=O(c.detail)),n(1,e=1)}const k=()=>se("/person/new"),d=c=>{n(1,e=c)};return s.$$.update=()=>{s.$$.dirty&19&&(n(2,l=p()),n(3,a=z(r||[])),r==null||r.forEach(c=>{n(4,i=""),c!=null&&c.email&&n(4,i+=c.email+`
`)}))},[r,e,l,a,i,f,k,d]}class Se extends Q{constructor(t){super(),W(this,t,Ee,ke,X,{})}}export{Se as component};
