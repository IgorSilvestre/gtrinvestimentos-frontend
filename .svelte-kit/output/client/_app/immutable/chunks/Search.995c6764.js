import{S as W,i as X,s as ee,e as O,b as T,v as J,d as C,f as Q,g as S,h as m,$ as te,k,q as L,l as g,m as E,r as N,C as p,D as b,a as D,c as F,n as _,Z,K as M,R as ae,Y as G,_ as le,w as re,a0 as ne,y as se,z as oe,A as ce,a1 as ie,B as ue}from"./index.78e4d4d0.js";import{a as V,A as j}from"./apiFetch.0eddb5fd.js";import{g as fe}from"./tagQueries.f543cd75.js";import{c as de,S as pe}from"./Select.8a162bf7.js";const x={yupStringMandatory:"Campo deve ser string",yupMandatory:"Campo obrigatÃ³rio",domains:{company:"Company",person:"Person",externalAPI:"ExternalAPI"},dispatch:{search:"search"}};function me(c){return c.map(e=>e.value)}function _e(c){let e,a;return{c(){e=k("p"),a=L("No domain passed to filter..")},l(r){e=g(r,"P",{});var t=E(e);a=N(t,"No domain passed to filter.."),t.forEach(m)},m(r,t){T(r,e,t),p(e,a)},p:b,i:b,o:b,d(r){r&&m(e)}}}function he(c){let e,a,r,t,o,l,u,s,n,i,A,$,w,f,I,P,v,K,d=c[0]!==x.domains.externalAPI&&H(c);return{c(){e=k("main"),a=k("label"),r=L("Busca"),t=D(),o=k("div"),l=k("div"),u=k("label"),s=L("Texto"),n=D(),i=k("input"),A=D(),d&&d.c(),$=D(),w=k("div"),f=k("button"),I=L("Buscar"),this.h()},l(h){e=g(h,"MAIN",{});var y=E(e);a=g(y,"LABEL",{class:!0,for:!0});var U=E(a);r=N(U,"Busca"),U.forEach(m),t=F(y),o=g(y,"DIV",{class:!0});var q=E(o);l=g(q,"DIV",{class:!0});var B=E(l);u=g(B,"LABEL",{class:!0,for:!0});var z=E(u);s=N(z,"Texto"),z.forEach(m),n=F(B),i=g(B,"INPUT",{placeholder:!0,class:!0,type:!0,id:!0}),A=F(B),d&&d.l(B),B.forEach(m),$=F(q),w=g(q,"DIV",{class:!0});var R=E(w);f=g(R,"BUTTON",{class:!0});var Y=E(f);I=N(Y,"Buscar"),Y.forEach(m),R.forEach(m),q.forEach(m),y.forEach(m),this.h()},h(){_(a,"class","text-center block uppercase tracking-wide font-bold"),_(a,"for","name"),_(u,"class","self-start block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"),_(u,"for","name"),_(i,"placeholder","Pesquisa geral"),_(i,"class","appearance-none block w-full text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white"),_(i,"type","text"),_(i,"id","searchText"),_(l,"class","flex flex-col items-center md:w-1/2"),_(f,"class","btn variant-filled-primary ml-3"),_(w,"class","flex items-center justify-center md:ml-10 mt-4 md:mt-0"),_(o,"class","flex flex-col md:flex-row items-center justify-center")},m(h,y){T(h,e,y),p(e,a),p(a,r),p(e,t),p(e,o),p(o,l),p(l,u),p(u,s),p(l,n),p(l,i),Z(i,c[3]),p(l,A),d&&d.m(l,null),p(o,$),p(o,w),p(w,f),p(f,I),P=!0,v||(K=[M(i,"input",c[5]),M(i,"keydown",c[6]),M(f,"click",c[8])],v=!0)},p(h,y){y&8&&i.value!==h[3]&&Z(i,h[3]),h[0]!==x.domains.externalAPI?d?(d.p(h,y),y&1&&S(d,1)):(d=H(h),d.c(),S(d,1),d.m(l,null)):d&&(J(),C(d,1,1,()=>{d=null}),Q())},i(h){P||(S(d),P=!0)},o(h){C(d),P=!1},d(h){h&&m(e),d&&d.d(),v=!1,ae(K)}}}function H(c){let e,a,r,t={ctx:c,current:null,token:null,hasCatch:!1,pending:ge,then:ke,catch:be,value:11,blocks:[,,,]};return G(a=c[1],t),{c(){e=O(),t.block.c()},l(o){e=O(),t.block.l(o)},m(o,l){T(o,e,l),t.block.m(o,t.anchor=l),t.mount=()=>e.parentNode,t.anchor=e,r=!0},p(o,l){c=o,t.ctx=c,l&2&&a!==(a=c[1])&&G(a,t)||le(t,c,l)},i(o){r||(S(t.block),r=!0)},o(o){for(let l=0;l<3;l+=1){const u=t.blocks[l];C(u)}r=!1},d(o){o&&m(e),t.block.d(o),t.token=null,t=null}}}function be(c){return{c:b,l:b,m:b,p:b,i:b,o:b,d:b}}function ke(c){let e,a,r,t,o,l;function u(n){c[7](n)}let s={placeholder:"Pesquisar por tags",items:c[11],multiple:!0,filter:de};return c[2]!==void 0&&(s.value=c[2]),t=new pe({props:s}),re.push(()=>ne(t,"value",u)),{c(){e=k("label"),a=L("Tags"),r=D(),se(t.$$.fragment),this.h()},l(n){e=g(n,"LABEL",{class:!0,for:!0});var i=E(e);a=N(i,"Tags"),i.forEach(m),r=F(n),oe(t.$$.fragment,n),this.h()},h(){_(e,"class","self-start block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"),_(e,"for","tags")},m(n,i){T(n,e,i),p(e,a),T(n,r,i),ce(t,n,i),l=!0},p(n,i){const A={};i&2&&(A.items=n[11]),!o&&i&4&&(o=!0,A.value=n[2],ie(()=>o=!1)),t.$set(A)},i(n){l||(S(t.$$.fragment,n),l=!0)},o(n){C(t.$$.fragment,n),l=!1},d(n){n&&m(e),n&&m(r),ue(t,n)}}}function ge(c){let e,a;return{c(){e=k("p"),a=L("Loading Search...")},l(r){e=g(r,"P",{});var t=E(e);a=N(t,"Loading Search..."),t.forEach(m)},m(r,t){T(r,e,t),p(e,a)},p:b,i:b,o:b,d(r){r&&m(e)}}}function ve(c){let e,a,r,t;const o=[he,_e],l=[];function u(s,n){return s[0]?0:1}return e=u(c),a=l[e]=o[e](c),{c(){a.c(),r=O()},l(s){a.l(s),r=O()},m(s,n){l[e].m(s,n),T(s,r,n),t=!0},p(s,[n]){let i=e;e=u(s),e===i?l[e].p(s,n):(J(),C(l[i],1,1,()=>{l[i]=null}),Q(),a=l[e],a?a.p(s,n):(a=l[e]=o[e](s),a.c()),S(a,1),a.m(r.parentNode,r))},i(s){t||(S(a),t=!0)},o(s){C(a),t=!1},d(s){l[e].d(s),s&&m(r)}}}function ye(c,e,a){let{domainToFilter:r}=e;const t=te();let o;r!==x.domains.externalAPI&&(o=fe());let l=[],u="",s;switch(r){case x.domains.person:s={getAll:j.person.getAll,search:j.person.search};break;case x.domains.externalAPI:s={companySearchEngine:j.externalAPI.companySearchEngine}}async function n(f,I){let P={};if(I&&(P.query=I),r===x.domains.externalAPI){const v=await V.post(s.companySearchEngine,P);return t(x.dispatch.search,v.data)}if(f&&f.length>0&&(P.tags=me(f)),(!f||f.length===0)&&!I){const{data:v}=await V.get(s==null?void 0:s.getAll);return t("search",v)}else if(s.search){const{data:v}=await V.post(s==null?void 0:s.search,P);return v.length===0?alert("Nenhuma registro"):t("search",v)}}function i(){u=this.value,a(3,u)}const A=f=>f.key==="Enter"&&n(l,u);function $(f){l=f,a(2,l)}const w=()=>n(l,u);return c.$$set=f=>{"domainToFilter"in f&&a(0,r=f.domainToFilter)},[r,o,l,u,n,i,A,$,w]}class Ie extends W{constructor(e){super(),X(this,e,ye,ve,ee,{domainToFilter:0})}}export{Ie as S,x as t};
