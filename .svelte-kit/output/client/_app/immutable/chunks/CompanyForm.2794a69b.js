import{S as Le,i as Ce,s as Oe,Y as $e,k as d,q,a as I,l as f,m,r as A,h as c,c as x,n as o,b as U,C as s,Z as K,K as P,_ as Ne,g as qe,d as Ae,R as Pe,F as ye,u as me,D as S,w as Be,a0 as Re,y as ze,z as Me,A as Xe,a1 as je,B as Fe}from"./index.78e4d4d0.js";import{a as Te}from"./apiFetch.0eddb5fd.js";import{g as De}from"./navigation.55c11801.js";import{c as fe,a as B,b as Ie,d as He,e as Ke}from"./index.esm.4d95b399.js";import{c as Ye,S as Ze}from"./Select.8a162bf7.js";import{p as Ge}from"./parseOptionToId.62dacb35.js";import{g as Je}from"./tagQueries.f543cd75.js";import{t as pe}from"./ProgressBar.svelte_svelte_type_style_lang.3c02a640.js";import{a as Qe,b as We}from"./config.c4e28fd4.js";const Ue=fe().shape({name:B().required("Name is required").min(2,"Name must be at least 2 characters"),tags:Ie(fe().shape({label:B().required(),value:B().required()})).optional(),employees:Ie(fe().shape({label:B().required(),value:B().required()})).optional(),description:B().optional(),target:B().optional(),lastUpdated:He().optional()});function xe(e){let t,l=e[1].name+"",r;return{c(){t=d("div"),r=q(l),this.h()},l(i){t=f(i,"DIV",{class:!0});var a=m(t);r=A(a,l),a.forEach(c),this.h()},h(){o(t,"class","text-red-500 text-xs")},m(i,a){U(i,t,a),s(t,r)},p(i,a){a&2&&l!==(l=i[1].name+"")&&me(r,l)},d(i){i&&c(t)}}}function Ve(e){let t,l=e[1].target+"",r;return{c(){t=d("div"),r=q(l),this.h()},l(i){t=f(i,"DIV",{class:!0});var a=m(t);r=A(a,l),a.forEach(c),this.h()},h(){o(t,"class","text-red-500 text-xs")},m(i,a){U(i,t,a),s(t,r)},p(i,a){a&2&&l!==(l=i[1].target+"")&&me(r,l)},d(i){i&&c(t)}}}function et(e){return{c:S,l:S,m:S,p:S,i:S,o:S,d:S}}function tt(e){let t,l,r;function i(n){e[10](n)}let a={items:e[13],multiple:!0,filter:Ye,required:!0};return e[0].tags!==void 0&&(a.value=e[0].tags),t=new Ze({props:a}),Be.push(()=>Re(t,"value",i)),{c(){ze(t.$$.fragment)},l(n){Me(t.$$.fragment,n)},m(n,k){Xe(t,n,k),r=!0},p(n,k){const p={};!l&&k&1&&(l=!0,p.value=n[0].tags,je(()=>l=!1)),t.$set(p)},i(n){r||(qe(t.$$.fragment,n),r=!0)},o(n){Ae(t.$$.fragment,n),r=!1},d(n){Fe(t,n)}}}function at(e){let t,l;return{c(){t=d("p"),l=q("Loading tag options...")},l(r){t=f(r,"P",{});var i=m(t);l=A(i,"Loading tag options..."),i.forEach(c)},m(r,i){U(r,t,i),s(t,l)},p:S,i:S,o:S,d(r){r&&c(t)}}}function Se(e){let t,l=e[1].description+"",r;return{c(){t=d("div"),r=q(l),this.h()},l(i){t=f(i,"DIV",{class:!0});var a=m(t);r=A(a,l),a.forEach(c),this.h()},h(){o(t,"class","text-red-500 text-xs")},m(i,a){U(i,t,a),s(t,r)},p(i,a){a&2&&l!==(l=i[1].description+"")&&me(r,l)},d(i){i&&c(t)}}}function rt(e){let t,l,r,i,a,n,k,p,V,Y,Z,E,G,J,w,u,Q,R,v,W,ae,z,C,re,le,T,$,se,ie,D,oe,ne,M,N,ce,ee,ue,ge,g=e[1].name&&xe(e),b=e[1].target&&Ve(e),y={ctx:e,current:null,token:null,hasCatch:!1,pending:at,then:tt,catch:et,value:13,blocks:[,,,]};$e(e[2],y);let h=e[1].description&&Se(e);return{c(){t=d("div"),l=d("div"),r=d("h2"),i=q("Editar Empresa"),a=I(),n=d("form"),k=d("div"),p=d("div"),V=d("label"),Y=q("Nome"),Z=I(),E=d("input"),G=I(),g&&g.c(),J=I(),w=d("div"),u=d("label"),Q=q("Target"),R=I(),v=d("textarea"),W=I(),b&&b.c(),ae=I(),z=d("div"),C=d("p"),re=q(`Tags
					`),y.block.c(),le=I(),T=d("div"),$=d("label"),se=q("Descrição"),ie=I(),D=d("textarea"),oe=I(),h&&h.c(),ne=I(),M=d("div"),N=d("button"),ce=q("Salvar"),this.h()},l(L){t=f(L,"DIV",{class:!0});var _=m(t);l=f(_,"DIV",{class:!0});var X=m(l);r=f(X,"H2",{class:!0});var be=m(r);i=A(be,"Editar Empresa"),be.forEach(c),a=x(X),n=f(X,"FORM",{});var O=m(n);k=f(O,"DIV",{class:!0});var te=m(k);p=f(te,"DIV",{class:!0});var j=m(p);V=f(j,"LABEL",{class:!0,for:!0});var he=m(V);Y=A(he,"Nome"),he.forEach(c),Z=x(j),E=f(j,"INPUT",{class:!0,type:!0,id:!0}),G=x(j),g&&g.l(j),j.forEach(c),J=x(te),w=f(te,"DIV",{class:!0});var F=m(w);u=f(F,"LABEL",{class:!0,for:!0});var _e=m(u);Q=A(_e,"Target"),_e.forEach(c),R=x(F),v=f(F,"TEXTAREA",{class:!0,id:!0}),m(v).forEach(c),W=x(F),b&&b.l(F),F.forEach(c),te.forEach(c),ae=x(O),z=f(O,"DIV",{class:!0});var ve=m(z);C=f(ve,"P",{class:!0});var de=m(C);re=A(de,`Tags
					`),y.block.l(de),de.forEach(c),ve.forEach(c),le=x(O),T=f(O,"DIV",{class:!0});var H=m(T);$=f(H,"LABEL",{class:!0,for:!0});var ke=m($);se=A(ke,"Descrição"),ke.forEach(c),ie=x(H),D=f(H,"TEXTAREA",{class:!0,id:!0,rows:!0}),m(D).forEach(c),oe=x(H),h&&h.l(H),H.forEach(c),ne=x(O),M=f(O,"DIV",{class:!0});var Ee=m(M);N=f(Ee,"BUTTON",{type:!0,class:!0});var we=m(N);ce=A(we,"Salvar"),we.forEach(c),Ee.forEach(c),O.forEach(c),X.forEach(c),_.forEach(c),this.h()},h(){o(r,"class","text-lg font-medium text-gray-900 mb-2"),o(V,"class","block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"),o(V,"for","name"),o(E,"class","appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white"),o(E,"type","text"),o(E,"id","name"),o(p,"class","w-full md:w-1/2 px-3 mb-6 md:mb-0"),o(u,"class","block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"),o(u,"for","target"),o(v,"class","appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white"),o(v,"id","target"),o(w,"class","w-full md:w-1/2 px-3 mb-6 md:mb-0"),o(k,"class","flex flex-wrap mb-4"),o(C,"class","block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"),o(z,"class","mb-4"),o($,"class","block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"),o($,"for","description"),o(D,"class","appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white"),o(D,"id","description"),o(D,"rows","3"),o(T,"class","mb-4"),o(N,"type","submit"),o(N,"class","text-blue-500 font-bold"),o(M,"class","flex justify-end"),o(l,"class","p-4"),o(t,"class","bg-white rounded-lg overflow-hidden shadow-lg")},m(L,_){U(L,t,_),s(t,l),s(l,r),s(r,i),s(l,a),s(l,n),s(n,k),s(k,p),s(p,V),s(V,Y),s(p,Z),s(p,E),K(E,e[0].name),s(p,G),g&&g.m(p,null),s(k,J),s(k,w),s(w,u),s(u,Q),s(w,R),s(w,v),K(v,e[0].target),s(w,W),b&&b.m(w,null),s(n,ae),s(n,z),s(z,C),s(C,re),y.block.m(C,y.anchor=null),y.mount=()=>C,y.anchor=null,s(n,le),s(n,T),s(T,$),s($,se),s(T,ie),s(T,D),K(D,e[0].description),s(T,oe),h&&h.m(T,null),s(n,ne),s(n,M),s(M,N),s(N,ce),ee=!0,ue||(ge=[P(E,"input",e[5]),P(E,"input",e[8]),P(v,"input",e[5]),P(v,"input",e[9]),P(D,"input",e[5]),P(D,"input",e[11]),P(n,"submit",e[6])],ue=!0)},p(L,[_]){e=L,_&1&&E.value!==e[0].name&&K(E,e[0].name),e[1].name?g?g.p(e,_):(g=xe(e),g.c(),g.m(p,null)):g&&(g.d(1),g=null),_&1&&K(v,e[0].target),e[1].target?b?b.p(e,_):(b=Ve(e),b.c(),b.m(w,null)):b&&(b.d(1),b=null),Ne(y,e,_),_&1&&K(D,e[0].description),e[1].description?h?h.p(e,_):(h=Se(e),h.c(),h.m(T,null)):h&&(h.d(1),h=null)},i(L){ee||(qe(y.block),ee=!0)},o(L){for(let _=0;_<3;_+=1){const X=y.blocks[_];Ae(X)}ee=!1},d(L){L&&c(t),g&&g.d(),b&&b.d(),y.block.d(),y.token=null,y=null,h&&h.d(),ue=!1,Pe(ge)}}}function lt(e,t,l){let r,i,{company:a=void 0}=t,n=Je(),k={name:(a==null?void 0:a.name)??"",description:(a==null?void 0:a.description)??"",target:(a==null?void 0:a.target)??"",tags:(a==null?void 0:a.tags)??[]};const{form:p,errors:V,handleChange:Y,handleSubmit:Z}=Ke({initialValues:k,validationSchema:Ue,onSubmit:async u=>{const Q=Ge(u==null?void 0:u.tags),R={...u,tags:Q};try{a?await Te.put("company/"+(a==null?void 0:a._id),R).then(()=>{pe.trigger(Qe),De("/company/"+(a==null?void 0:a._id))}):await Te.post("company",R).then(v=>{pe.trigger(We),De("/company/"+v.data._id)})}catch(v){const{clientMessage:W}=v.response.data.error;pe.trigger({message:W||"Ocorreu um erro",background:"variant-filled-error"}),console.error(v)}finally{}}});ye(e,p,u=>l(0,r=u)),ye(e,V,u=>l(1,i=u));function E(){r.name=this.value,p.set(r)}function G(){r.target=this.value,p.set(r)}function J(u){e.$$.not_equal(r.tags,u)&&(r.tags=u,p.set(r))}function w(){r.description=this.value,p.set(r)}return e.$$set=u=>{"company"in u&&l(7,a=u.company)},[r,i,n,p,V,Y,Z,a,E,G,J,w]}class mt extends Le{constructor(t){super(),Ce(this,t,lt,rt,Oe,{company:7})}}export{mt as C};
